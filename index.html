<script>

const choices = ['paper', 'rock', 'scissors'];

function computerPlay() {
    
    const randomNum = Math.floor(Math.random() * choices.length);
    return choices[randomNum];
}

function playRound(playerSelection, computerSelection) {

    playerSelection = playerSelection.toLowerCase();
    computerSelection = computerSelection.toLowerCase();

    const playerSelectionIndex = choices.indexOf(playerSelection);
    const computerSelectionIndex = choices.indexOf(computerSelection);

    const outcomes = [
        ['t', 'c', 'p'],
        ['p', 't', 'c'],
        ['c', 'p', 't']
    ];

    const outcomeMap = {
        't': `It's a tie! You both selected ${playerSelection}`,
        'c': `You Lose! ${computerSelection} beats ${playerSelection}`,
        'p': `You Win! ${playerSelection} beats ${computerSelection}`
    };

    const outcome = outcomes[playerSelectionIndex][computerSelectionIndex];
    
    return {
        'outcome': outcome,
        'winnerStr': outcomeMap[outcome]
        };
}

function game() {

    const numRounds = 5;
    
    var computerPoints = 0;
    var playerPoints = 0;

    for (let i = 0; i < numRounds; i++) {

        let playerSelection;
        while (choices.indexOf(playerSelection) === -1) {
            playerSelection = prompt('Select a move (type rock, paper or scissors): ');
        }
        
        const computerSelection = computerPlay();

        const result = playRound(playerSelection, computerSelection);
        console.log(result.winnerStr)
        const outcome = result.outcome;

        if (outcome !== 't') {
            if (outcome === 'p') {
                playerPoints++; 
            }
            else {
                computerPoints++;
            }
        }
    }

    if (playerPoints > computerPoints) {
        alert(`P${playerPoints} : C${computerPoints} - You Win!`)
    }
    else if (playerPoints < computerPoints) {
        alert(`P${playerPoints} : C${computerPoints} - You Lose!`)
    }
    else {
        alert("It's a tie!")
    }

}

</script>
